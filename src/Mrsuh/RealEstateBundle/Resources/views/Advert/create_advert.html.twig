{% extends "MrsuhRealEstateBundle::layout.html.twig" %}
{% block content %}

    {{ form_start(form) }}
    <label>Данные продавца</label>
    <hr>
    <div class="row">
        <div class="col-md-2"><label>Имя продавца 1</label></div>
        <div class="col-md-4">{{ form_widget(form.advert_seller_name1, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Телефон продавца 1</label></div>
        <div class="col-md-4">{{ form_widget(form.advert_seller_phone1, {'attr': {'class': 'form-control' }}) }}</div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2"><label>Имя продавца 2</label></div>
        <div class="col-md-4">{{ form_widget(form.advert_seller_name2, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Телефон продавца 2</label></div>
        <div class="col-md-4">{{ form_widget(form.advert_seller_phone2, {'attr': {'class': 'form-control' }}) }}</div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2"><label>Имя продавца 3</label></div>
        <div class="col-md-4">{{ form_widget(form.advert_seller_name3, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Телефон продавца 3</label></div>
        <div class="col-md-4">{{ form_widget(form.advert_seller_phone3, {'attr': {'class': 'form-control' }}) }}</div>
    </div>
    <br>
    <label>Характеристики</label>
    <hr>
    <div class="row">
        <div class="col-md-2"><label>Тип Объявления*</label></div>
        <div class="col-md-2">{{ form_widget(form.advert_type, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Категория*</label></div>
        <div class="col-md-2">{{ form_widget(form.advert_category, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Тип недвижимости*</label></div>
        <div class="col-md-2">{{ form_widget(form.object_type, {'attr': {'class': 'form-control' }}) }}</div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2"><label>Эксклюзив</label></div>
        <div class="col-md-2">{{ form_widget(form.advert_exclusive, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Цена</label></div>
        <div class="col-md-2">{{ form_widget(form.advert_price, {'attr': {'class': 'form-control' }}) }}</div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2"><label>Общая площадь*</label></div>
        <div class="col-md-2">{{ form_widget(form.object_common_area, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Жилая площадь*</label></div>
        <div class="col-md-2">{{ form_widget(form.object_live_area, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Площадь кухни*</label></div>
        <div class="col-md-2">{{ form_widget(form.object_kitchen_area, {'attr': {'class': 'form-control' }}) }}</div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2"><label>Этаж*</label></div>
        <div class="col-md-2">{{ form_widget(form.object_floor, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Этажей в доме*</label></div>
        <div class="col-md-2">{{ form_widget(form.object_floors, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Количество комнат</label></div>
        <div class="col-md-2">{{ form_widget(form.object_room_number, {'attr': {'class': 'form-control' }}) }}</div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2"><label>Земельный участок</label></div>
        <div class="col-md-2">{{ form_widget(form.object_section_area, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Год постройки</label></div>
        <div class="col-md-2">{{ form_widget(form.object_build_year, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Цена за квадратный метр</label></div>
        <div class="col-md-2">{{ form_widget(form.advert_meter_price, {'attr': {'class': 'form-control', 'readonly': 'readonly' }}) }}</div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2"><label>Общее состояние</label></div>
        <div class="col-md-2">{{ form_widget(form.object_state, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Материал стен</label></div>
        <div class="col-md-2">{{ form_widget(form.object_wall, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Тип водоснабжения</label></div>
        <div class="col-md-2">{{ form_widget(form.object_water_supply, {'attr': {'class': 'form-control' }}) }}</div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2"><label>Тип отопления</label></div>
        <div class="col-md-2">{{ form_widget(form.object_heating, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Балкон / лоджия</label></div>
        <div class="col-md-2">{{ form_widget(form.object_balcony, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Новостройка</label></div>
        <div class="col-md-2">{{ form_widget(form.object_new_house, {'attr': {'class': 'form-control' }}) }}</div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2"><label>Санузел</label></div>
        <div class="col-md-2">{{ form_widget(form.object_wc, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Ипотека</label></div>
        <div class="col-md-2">{{ form_widget(form.object_mortgage, {'attr': {'class': 'form-control' }}) }}</div>
    </div>
    <label>Местоположение</label>
    <hr>
    <div class="row">
        <div class="col-md-2"><label>Регион</label></div>
        <div class="col-md-2">{{ form_widget(form.object_region, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Город</label></div>
        <div class="col-md-2">{{ form_widget(form.object_city, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Район города</label></div>
        <div class="col-md-2">
        {% for id,city in regionsCity %}
            <select class="form-control region_city" id="region_city_{{ id }}" {% if city != regionsCity | first %}style="display: none;"{% endif %}>
                {% for key,name in city %}
                    <option value="{{ key }}">{{ name }}</option>
                {% endfor %}
            </select>
        {% endfor %}
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2"><label>Улица</label></div>
        <div class="col-md-2">{{ form_widget(form.object_street, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Номер дома</label></div>
        <div class="col-md-2">{{ form_widget(form.object_house, {'attr': {'class': 'form-control' }}) }}</div>
        <div class="col-md-2"><label>Квартира</label></div>
        <div class="col-md-2">{{ form_widget(form.object_flat, {'attr': {'class': 'form-control' }}) }}</div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2"><label>Ориентир</label></div>
        <div class="col-md-10">{{ form_widget(form.object_landmark, {'attr': {'class': 'form-control' }}) }}</div>
    </div>
    <br>
    <label>Фотографии</label>
    <hr>
    <div class="row">
        <div class="col-md-2"><label>Фото</label></div>
        <div class="col-md-1"><button type="button" class="btn btn-success" id="add_img">+</button></div>
        <div class="col-md-9"><div id="createAdvert_advert_image"></div></div>
        </div>
    <br>
    <label>Описание</label>
    <hr>
    <div class="row">
        <div class="col-md-2"><label>Описание</label></div>
        <div class="col-md-10">{{ form_widget(form.description_description, {'attr': {'class': 'form-control' }}) }}</div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-2"><label>Комментарии</label></div>
        <div class="col-md-10">{{ form_widget(form.description_comment, {'attr': {'class': 'form-control' }}) }}</div>
    </div>
    <hr>
    <br>
    <div class="row">
        <div class="col-md-2"><button type="button" class="btn btn-success btn-width" id="submit_button">Создать</button></div>
    </div>

    {% do form.advert_image.setRendered  %}
    {{ form_widget(form.submit, {'attr': {'class': 'btn btn-success btn-width', 'style': 'display: none;'}}) }}
    {{ form_end(form) }}

{% endblock %}

{% block js %}
<script>
    $(function() {

        var submit = $('#createAdvert_submit');
        var submit_button = $('#submit_button');
        var region_city = $('#createAdvert_object_region_city');

        var select_city = $('#createAdvert_object_city');
        select_city.change(function(){
            $('.region_city').hide();
           $('#region_city_' + select_city.val()).show();
        });

        submit_button.click(function(){
            var val = $('.region_city:visible').val();
            region_city.val(val);
            submit.click();
        });

        var advert_meter_price =  $( "#createAdvert_advert_meter_price");
        var advert_price =  $( "#createAdvert_advert_price");
        var object_common_area =  $( "#createAdvert_object_common_area");

        var mathMeterPrice = function()
        {
            var meters = parseFloat(object_common_area.val());
            var price = parseFloat(advert_price.val());
            var meterPrice = null;
            if(!isNaN(meters) && !isNaN(price)) {
                meterPrice = (price/meters).toFixed(0);
            }

            advert_meter_price.val(meterPrice);
        };

        object_common_area.bind('change', mathMeterPrice);
        advert_price.bind('change',mathMeterPrice);

        var images = $('#createAdvert_advert_image');
        var add_img = $('#add_img');
        var count = 0;
        add_img.click(function(){
            if(count <= 10) {
                var img = '<input type="file" id="createAdvert_advert_image_' + count +'_file" name="createAdvert[advert_image][' + count +'][file]" class="btn">';
                images.append(img);
                count++;
            }
        });
    });
</script>
{% endblock %}